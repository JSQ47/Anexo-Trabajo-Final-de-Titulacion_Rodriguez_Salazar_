<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSS Tizon Tardio - Monitor Agr√≠cola</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Inter:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z' fill='%23e9edc9'/><path d='M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z' fill='%232d5a27'/></svg>">
</head>

<body>
    <div class="sidebar">
        <div class="logo">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                    fill="#e9edc9" />
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    fill="#2d5a27" />
            </svg>
            DSS Planta de papas
        </div>
        <a href="#" class="nav-item active" onclick="showSection('monitor', this); return false;">
            <span>üìä Monitor</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('history', this); return false;">
            <span>üì∏ Historial</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('forecast', this); return false;">
            <span>‚òÅÔ∏è Pron√≥stico</span>
        </a>
        <div style="margin-top: auto; font-size: 12px; opacity: 0.6; padding-left: 16px;">
            Universidad Polit√©cnica Salesiana ‚Ä¢ 2025
        </div>
    </div>

    <button id="menu-toggle" aria-label="Abrir men√∫">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12h18M3 6h18M3 18h18" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    </button>

    <div id="sidebar-overlay"></div>

    <main class="main-content">
        <!-- SECCI√ìN MONITOR -->
        <section id="sec-monitor" class="active-section">
            <header>
                <h1>Monitor de Cultivo</h1>
                <p style="color: var(--text-muted);">Sistema de Soporte a Decisiones para Tiz√≥n Tard√≠o</p>
            </header>

            <div class="grid">
                <!-- SECCI√ìN 1: DIAGN√ìSTICO POR IMAGEN -->
                <section class="card">
                    <h2>Diagn√≥stico por Imagen</h2>
                    <p style="margin-bottom: 20px; color: var(--text-muted); font-size: 14px;">
                        Sube una foto de la hoja para que el modelo lo identifique.
                    </p>

                    <div class="input-group">
                        <label for="input">Imagen de la Hoja</label>
                        <input type="file" id="input" accept="image/*">
                    </div>

                    <img id="image-preview" src="#" alt="Vista previa" />

                    <button onclick="analizar()" id="btn-analizar">
                        <span>‚ö° Analizar Imagen</span>
                    </button>

                    <div id="output" class="result-box"
                        style="display:none; background: #f8f9fa; border: 1px solid #e9ecef;"></div>
                </section>

                <!-- SECCI√ìN 2: MONITOR DE RIESGO CLIM√ÅTICO -->
                <section class="card">
                    <h2>Riesgo: Tiz√≥n Tard√≠o</h2>
                    <p style="margin-bottom: 20px; color: var(--text-muted); font-size: 14px;">
                        C√°lculo de riesgo basado en Arbol de Decisi√≥n.
                    </p>

                    <button onclick="obtenerClima()" id="btn-geo" class="btn-secondary">
                        <span>üìç Usar mi ubicaci√≥n actual</span>
                    </button>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="input-group">
                            <label>Temperatura (¬∞C)</label>
                            <input type="number" id="temp" placeholder="18">
                        </div>

                        <div class="input-group">
                            <label>Humedad (%)</label>
                            <input type="number" id="humedad" placeholder="92">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="input-group">
                            <label>¬øLlueve?</label>
                            <select id="lluvia">
                                <option value="no">No</option>
                                <option value="si">S√≠</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Horas Cr√≠ticas</label>
                            <input type="number" id="horas" placeholder="4">
                        </div>
                    </div>

                    <button onclick="calcularRiesgo()" id="btn-riesgo">
                        <span>üîç Calcular Riesgo</span>
                    </button>

                    <div id="resultado-clima" class="result-box"
                        style="display:none; text-align: center; font-weight: 600;"></div>
                </section>
            </div>
        </section>

        <!-- SECCI√ìN HISTORIAL -->
        <section id="sec-history" class="hidden-section">
            <header style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1>Historial de Diagn√≥sticos</h1>
                    <p style="color: var(--text-muted);">Registro local de im√°genes y an√°lisis previos.</p>
                </div>
                <button onclick="clearHistory()" style="background-color: #d63031; padding: 8px 16px; font-size: 14px;">
                    üóëÔ∏è Borrar Todo
                </button>
            </header>
            <div id="history-grid" class="grid">
                <!-- Se llenar√° con JS -->
                <p style="color: var(--text-muted);">No hay diagn√≥sticos guardados a√∫n.</p>
            </div>
        </section>

        <!-- SECCI√ìN PRON√ìSTICO -->
        <section id="sec-forecast" class="hidden-section">
            <header>
                <h1>Pron√≥stico 5 D√≠as</h1>
                <p style="color: var(--text-muted);">Planificaci√≥n de fumigaci√≥n basada en lluvias.</p>
            </header>
            <div id="forecast-container" class="grid">
                <!-- Se llenar√° con JS -->
                <p>Cargando pron√≥stico...</p>
            </div>
        </section>
    </main>

    <script src="script.js?v=3"></script>
</body>

</html>